<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>issues-app</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content=""><meta data-n-head="ssr" data-hid="charset" charset="utf-8"><meta data-n-head="ssr" data-hid="mobile-web-app-capable" name="mobile-web-app-capable" content="yes"><meta data-n-head="ssr" data-hid="apple-mobile-web-app-title" name="apple-mobile-web-app-title" content="issues-app"><meta data-n-head="ssr" data-hid="og:type" name="og:type" property="og:type" content="website"><meta data-n-head="ssr" data-hid="og:title" name="og:title" property="og:title" content="issues-app"><meta data-n-head="ssr" data-hid="og:site_name" name="og:site_name" property="og:site_name" content="issues-app"><meta data-n-head="ssr" data-hid="og:description" name="og:description" property="og:description" content="``GITHUB_PERSONAL_ACCESS_TOKEN=add_you_github_personal_access_token_to_.env_file``"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="shortcut icon" href="/favicon.ico"><link data-n-head="ssr" rel="manifest" href="/_nuxt/manifest.c6e6c453.json" data-hid="manifest"><link rel="preload" href="/_nuxt/665dc92.js" as="script"><link rel="preload" href="/_nuxt/9890116.js" as="script"><link rel="preload" href="/_nuxt/68c6bac.js" as="script"><link rel="preload" href="/_nuxt/e33e779.js" as="script"><link rel="preload" href="/_nuxt/1915f1f.js" as="script"><style data-vue-ssr-id="517a8dd7:0 7e56e4e3:0 7d06f6c2:0 6570ded6:0 0f0b1414:0">code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}:root{--colorTextPrimary:#24292e;--colorBorder_1:#eaecef;--colorTextLink:#0366d6;--colorBgTertiary:#f6f8fa;--colorIconSuccess:#22863a;--color_1:#fff;--indent_1:5px;--indent_2:10px;--indent_3:15px;--indent_4:20px;--indent_5:3px;--fontSize_1:14px;--fontSize_2:12px;--borderRadius_1:5px;--borderRadius_2:10px;--iconSize_1:16px;--iconSize_2:12px}html{font-family:"Source Sans Pro",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:16px;word-spacing:1px;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;box-sizing:border-box}*,:after,:before{box-sizing:border-box;margin:0}#__layout,#__nuxt,body{width:100%;height:100%;position:relative;display:flex;align-items:center;justify-content:center;overflow:auto}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;color:#24292e;color:var(--colorTextPrimary);font-size:var(----fontSize_1)}input{background-color:transparent;outline:0;border-radius:3px;font-size:21px;padding:2px 10px;width:100%}input::-webkit-caps-lock-indicator,input::-webkit-contacts-auto-fill-button,input::-webkit-credentials-auto-fill-button,input::-webkit-textfield-decoration-container{visibility:hidden}a{color:#0366d6;color:var(--colorTextLink);text-decoration:none}.link_expressionless{color:#24292e!important;color:var(--colorTextPrimary)!important}.link_expressionless:hover{color:#0366d6!important;color:var(--colorTextLink)!important}.h1,.h2,.h3,.h4,.h5,.h6{font-weight:600!important}.textSmall{font-size:12px!important;font-size:var(--fontSize_2)!important}.lightText{color:#fff!important;color:var(--color_1)!important}.issuePage_2etZA{display:flex;flex-direction:column;padding:var(--indent_4);width:100%}.comment_3TwMh{width:100%;border-radius:var(--borderRadius_1)}.comment_3TwMh:not(:first-child){margin-top:var(--indent_4)}.commentHeader_2BTxK{padding:var(--indent_4);border:1px solid var(--colorBorder_1);border-bottom:none;border-radius:var(--borderRadius_1) var(--borderRadius_1) 0 0;background-color:var(--colorBgTertiary)}.commentBody_3YfW2{border:1px solid var(--colorBorder_1);border-radius:0 0 var(--borderRadius_1) var(--borderRadius_1);padding:var(--indent_4)}</style>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div data-fetch-key="0" class="issuePage_2etZA"><div class="comment_3TwMh"><div class="textSmall commentHeader_2BTxK"><strong><a href class="link_expressionless">
        maoberlehner
      </a></strong>
    commented
    <a href class="link_expressionless">
      2020-11-19T09:04:14Z
    </a></div> <div class="commentBody_3YfW2">
    ### Version
2.6.11

### Reproduction link
[https://codesandbox.io/s/vue-issue-staticclass-on-wrapped-async-component-not-rendered-on-the-server-by-vue-server-renderer-nur3o?file=/_LOOK_HERE/test.html](https://codesandbox.io/s/vue-issue-staticclass-on-wrapped-async-component-not-rendered-on-the-server-by-vue-server-renderer-nur3o?file=/_LOOK_HERE/test.html)

### Steps to reproduce
0. Ignore all the Nuxt.js stuff in the repo. I needed a Container CodeSandbox, so I started with a Nuxt.js template. Only focus on the files I mention in the following steps. The error has nothing to do with Nuxt.js! Also ignore the browser output of the CodeSandbox! It is only about the HTML in `./_LOOK_HERE/test.html`!
1. In the `./_LOOK_HERE/test.html` file you can see `&lt;div class="AsyncDiv">&lt;/div>` does not have `test-class` but `&lt;div class="SyncDiv test-class">&lt;/div>` does. **Both should have `test-class`.**
2. In `./main.js` you can see the `AsyncDiv` and `SyncDiv` components. They are almost the same but **the first one is an async factory component.**
3. The `WrapperAsync` and `WrapperSync` components are exactly the same but rendering the two respective components. This is important; **if I render `AsyncDiv` directly without the wrapper, everything works as expected.**
4. In `App` we render both wrappers with the same `staticClass`.
5. In`./render.js` you can see the code that produces `./_LOOK_HERE/test.html`. You can run it in the terminal with `node render.js` but it is a little buggy on CodeSandbox if you have opened `test.html` before. Close the `test.html` tab before running the script. Or just believe me that it produces `./_LOOK_HERE/test.html`.
6. Not in the reproduction: If the server rendered code is hydrated client-side, `test-class` is appended to `AsyncDiv`. So it seems as if on the client-side this case is handled correctly.

### What is expected?
In `test.html` both components should be rendered with the `test-class`.

```html
&lt;div class="AsyncDiv test-class">&lt;/div>
&lt;div class="SyncDiv test-class">&lt;/div>
```

### What is actually happening?
Only the `SyncDiv` component correctly renders `test-class`.

```html
&lt;div class="AsyncDiv">&lt;/div>
&lt;div class="SyncDiv test-class">&lt;/div>
```

---
I ran into this problem working on [vue-lazy-hydration](https://github.com/maoberlehner/vue-lazy-hydration). There I use a wrapper around an async component to delay the hydration of the async component.
I realize that this is an edge-case and I can and will work around it in `vue-lazy-hydration` (by resolving the async component and rendering the resolved sync component) but I thought this maybe can be valuable for others.
I also realize that there is probably not a lot of focus on v2 currently but I think this is still important because there will be huge legacy projects running on v2 for years to come.

&lt;!-- generated by vue-issues. DO NOT REMOVE -->
  </div></div></div></div></div><script>window.__NUXT__=function(e,t){return{layout:"default",data:[{}],fetch:[{comments:[{url:"https://api.github.com/repos/vuejs/vue/issues/11780",repository_url:"https://api.github.com/repos/vuejs/vue",labels_url:"https://api.github.com/repos/vuejs/vue/issues/11780/labels{/name}",comments_url:"https://api.github.com/repos/vuejs/vue/issues/11780/comments",events_url:"https://api.github.com/repos/vuejs/vue/issues/11780/events",html_url:"https://github.com/vuejs/vue/issues/11780",id:746383458,node_id:"MDU6SXNzdWU3NDYzODM0NTg=",number:11780,title:"staticClass on wrapped async component not rendered on the server by vue-server-renderer",user:{login:"maoberlehner",id:6883314,node_id:"MDQ6VXNlcjY4ODMzMTQ=",avatar_url:"https://avatars3.githubusercontent.com/u/6883314?v=4",gravatar_id:"",url:"https://api.github.com/users/maoberlehner",html_url:"https://github.com/maoberlehner",followers_url:"https://api.github.com/users/maoberlehner/followers",following_url:"https://api.github.com/users/maoberlehner/following{/other_user}",gists_url:"https://api.github.com/users/maoberlehner/gists{/gist_id}",starred_url:"https://api.github.com/users/maoberlehner/starred{/owner}{/repo}",subscriptions_url:"https://api.github.com/users/maoberlehner/subscriptions",organizations_url:"https://api.github.com/users/maoberlehner/orgs",repos_url:"https://api.github.com/users/maoberlehner/repos",events_url:"https://api.github.com/users/maoberlehner/events{/privacy}",received_events_url:"https://api.github.com/users/maoberlehner/received_events",type:"User",site_admin:!1},labels:[],state:"open",locked:!1,assignee:e,assignees:[],milestone:e,comments:0,created_at:t,updated_at:t,closed_at:e,author_association:"CONTRIBUTOR",active_lock_reason:e,body:'### Version\r\n2.6.11\r\n\r\n### Reproduction link\r\n[https://codesandbox.io/s/vue-issue-staticclass-on-wrapped-async-component-not-rendered-on-the-server-by-vue-server-renderer-nur3o?file=/_LOOK_HERE/test.html](https://codesandbox.io/s/vue-issue-staticclass-on-wrapped-async-component-not-rendered-on-the-server-by-vue-server-renderer-nur3o?file=/_LOOK_HERE/test.html)\r\n\r\n### Steps to reproduce\r\n0. Ignore all the Nuxt.js stuff in the repo. I needed a Container CodeSandbox, so I started with a Nuxt.js template. Only focus on the files I mention in the following steps. The error has nothing to do with Nuxt.js! Also ignore the browser output of the CodeSandbox! It is only about the HTML in `./_LOOK_HERE/test.html`!\r\n1. In the `./_LOOK_HERE/test.html` file you can see `<div class="AsyncDiv"></div>` does not have `test-class` but `<div class="SyncDiv test-class"></div>` does. **Both should have `test-class`.**\r\n2. In `./main.js` you can see the `AsyncDiv` and `SyncDiv` components. They are almost the same but **the first one is an async factory component.**\r\n3. The `WrapperAsync` and `WrapperSync` components are exactly the same but rendering the two respective components. This is important; **if I render `AsyncDiv` directly without the wrapper, everything works as expected.**\r\n4. In `App` we render both wrappers with the same `staticClass`.\r\n5. In`./render.js` you can see the code that produces `./_LOOK_HERE/test.html`. You can run it in the terminal with `node render.js` but it is a little buggy on CodeSandbox if you have opened `test.html` before. Close the `test.html` tab before running the script. Or just believe me that it produces `./_LOOK_HERE/test.html`.\r\n6. Not in the reproduction: If the server rendered code is hydrated client-side, `test-class` is appended to `AsyncDiv`. So it seems as if on the client-side this case is handled correctly.\r\n\r\n### What is expected?\r\nIn `test.html` both components should be rendered with the `test-class`.\r\n\r\n```html\r\n<div class="AsyncDiv test-class"></div>\r\n<div class="SyncDiv test-class"></div>\r\n```\r\n\r\n### What is actually happening?\r\nOnly the `SyncDiv` component correctly renders `test-class`.\r\n\r\n```html\r\n<div class="AsyncDiv"></div>\r\n<div class="SyncDiv test-class"></div>\r\n```\r\n\r\n---\r\nI ran into this problem working on [vue-lazy-hydration](https://github.com/maoberlehner/vue-lazy-hydration). There I use a wrapper around an async component to delay the hydration of the async component.\r\nI realize that this is an edge-case and I can and will work around it in `vue-lazy-hydration` (by resolving the async component and rendering the resolved sync component) but I thought this maybe can be valuable for others.\r\nI also realize that there is probably not a lot of focus on v2 currently but I think this is still important because there will be huge legacy projects running on v2 for years to come.\r\n\r\n\x3c!-- generated by vue-issues. DO NOT REMOVE --\x3e',closed_by:e,performed_via_github_app:e}]}],error:e,state:{issues:{issues:[]}},serverRendered:!0,routePath:"/issues/11780",config:{content:{dbHash:"ce3f5e0b"}}}}(null,"2020-11-19T09:04:14Z")</script><script src="/_nuxt/665dc92.js" defer></script><script src="/_nuxt/1915f1f.js" defer></script><script src="/_nuxt/9890116.js" defer></script><script src="/_nuxt/68c6bac.js" defer></script><script src="/_nuxt/e33e779.js" defer></script>
  </body>
</html>
