<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>issues-app</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content=""><meta data-n-head="ssr" data-hid="charset" charset="utf-8"><meta data-n-head="ssr" data-hid="mobile-web-app-capable" name="mobile-web-app-capable" content="yes"><meta data-n-head="ssr" data-hid="apple-mobile-web-app-title" name="apple-mobile-web-app-title" content="issues-app"><meta data-n-head="ssr" data-hid="og:type" name="og:type" property="og:type" content="website"><meta data-n-head="ssr" data-hid="og:title" name="og:title" property="og:title" content="issues-app"><meta data-n-head="ssr" data-hid="og:site_name" name="og:site_name" property="og:site_name" content="issues-app"><meta data-n-head="ssr" data-hid="og:description" name="og:description" property="og:description" content="``GITHUB_PERSONAL_ACCESS_TOKEN=add_you_github_personal_access_token_to_.env_file``"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="shortcut icon" href="/favicon.ico"><link data-n-head="ssr" rel="manifest" href="/_nuxt/manifest.c6e6c453.json" data-hid="manifest"><link rel="preload" href="/_nuxt/665dc92.js" as="script"><link rel="preload" href="/_nuxt/9890116.js" as="script"><link rel="preload" href="/_nuxt/68c6bac.js" as="script"><link rel="preload" href="/_nuxt/e33e779.js" as="script"><link rel="preload" href="/_nuxt/1915f1f.js" as="script"><style data-vue-ssr-id="517a8dd7:0 7e56e4e3:0 7d06f6c2:0 6570ded6:0 0f0b1414:0">code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}:root{--colorTextPrimary:#24292e;--colorBorder_1:#eaecef;--colorTextLink:#0366d6;--colorBgTertiary:#f6f8fa;--colorIconSuccess:#22863a;--color_1:#fff;--indent_1:5px;--indent_2:10px;--indent_3:15px;--indent_4:20px;--indent_5:3px;--fontSize_1:14px;--fontSize_2:12px;--borderRadius_1:5px;--borderRadius_2:10px;--iconSize_1:16px;--iconSize_2:12px}html{font-family:"Source Sans Pro",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:16px;word-spacing:1px;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;box-sizing:border-box}*,:after,:before{box-sizing:border-box;margin:0}#__layout,#__nuxt,body{width:100%;height:100%;position:relative;display:flex;align-items:center;justify-content:center;overflow:auto}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;color:#24292e;color:var(--colorTextPrimary);font-size:var(----fontSize_1)}input{background-color:transparent;outline:0;border-radius:3px;font-size:21px;padding:2px 10px;width:100%}input::-webkit-caps-lock-indicator,input::-webkit-contacts-auto-fill-button,input::-webkit-credentials-auto-fill-button,input::-webkit-textfield-decoration-container{visibility:hidden}a{color:#0366d6;color:var(--colorTextLink);text-decoration:none}.link_expressionless{color:#24292e!important;color:var(--colorTextPrimary)!important}.link_expressionless:hover{color:#0366d6!important;color:var(--colorTextLink)!important}.h1,.h2,.h3,.h4,.h5,.h6{font-weight:600!important}.textSmall{font-size:12px!important;font-size:var(--fontSize_2)!important}.lightText{color:#fff!important;color:var(--color_1)!important}.issuePage_2etZA{display:flex;flex-direction:column;padding:var(--indent_4);width:100%}.comment_3TwMh{width:100%;border-radius:var(--borderRadius_1)}.comment_3TwMh:not(:first-child){margin-top:var(--indent_4)}.commentHeader_2BTxK{padding:var(--indent_4);border:1px solid var(--colorBorder_1);border-bottom:none;border-radius:var(--borderRadius_1) var(--borderRadius_1) 0 0;background-color:var(--colorBgTertiary)}.commentBody_3YfW2{border:1px solid var(--colorBorder_1);border-radius:0 0 var(--borderRadius_1) var(--borderRadius_1);padding:var(--indent_4)}</style>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div data-fetch-key="0" class="issuePage_2etZA"><div class="comment_3TwMh"><div class="textSmall commentHeader_2BTxK"><strong><a href class="link_expressionless">
        LongTengDao
      </a></strong>
    commented
    <a href class="link_expressionless">
      2020-11-09T10:32:22Z
    </a></div> <div class="commentBody_3YfW2">
    ### Version
2.6.12

### Steps to reproduce
```html
&lt;div>&lt;/div>
&lt;script>
new Vue({
  el: 'main',
  template: '&lt;MyDatetime :value="datetime" />',
  data: {
    datetime: Date.now(),
  },
  components: {
    MyDatetime: {
      template: `
        &lt;div>
          expect undefined: {{ toString + "" }}&lt;br />
          expect default: {{ toLocalString + "" }}&lt;br />
        &lt;/div>`,
      props: {
        value: {
          type: Number,
        },
        toString: {
          validator: mode => [ 'date-time', 'date', 'time' ].includes(mode),
        },
        toLocalString: {
          validator: mode => [ 'date-time', 'date', 'time', 'default' ].includes(mode),
          default: 'default',
        },
      },
    },
  },
});
&lt;/script>
```

### What is expected?

They are all keys match the uni simple rule: not start with `_` or `$`

### What is actually happening?

If parent component doesn't pass the prop, then the component will get neither `undefined` nor `default`, but the value in `Object.prototype`.

---

1. `{}` in these two lines need to be replaced to `Object.create(null)`, the first line is required for two cases, and the second line is required for `default` case,

https://github.com/vuejs/vue/blob/52719ccab8fccffbdf497b96d3731dc86f04c1ce/src/core/vdom/helpers/extract-props.js#L24

https://github.com/vuejs/vue/blob/33e669b22f69a1f9c9147528360fe0bba85534f0/src/core/instance/state.js#L66

2. there still leave `constructor` which can't be used, it need `delete Vue.prototype.constructor`, and give an alternative way to do what `vm.constructor` (`Sub.prototype.constructor = Sub`) do in current source code.

&lt;!-- generated by vue-issues. DO NOT REMOVE -->
  </div></div><div class="comment_3TwMh"><div class="textSmall commentHeader_2BTxK"><strong><a href class="link_expressionless">
        posva
      </a></strong>
    commented
    <a href class="link_expressionless">
      2020-11-09T12:01:58Z
    </a></div> <div class="commentBody_3YfW2">
    As said in vue-next repo, creating props named like existing functions seems like a bad idea because it could break any code relying on native object functions. It's also unrealistic from a naming perspective.
Because of that, I don't think it's reasonable to use `Object.create(null)` as proposed
  </div></div></div></div></div><script>window.__NUXT__=function(e,t,s,r){return{layout:"default",data:[{}],fetch:[{comments:[{url:t,repository_url:"https://api.github.com/repos/vuejs/vue",labels_url:"https://api.github.com/repos/vuejs/vue/issues/11757/labels{/name}",comments_url:"https://api.github.com/repos/vuejs/vue/issues/11757/comments",events_url:"https://api.github.com/repos/vuejs/vue/issues/11757/events",html_url:"https://github.com/vuejs/vue/issues/11757",id:738903775,node_id:"MDU6SXNzdWU3Mzg5MDM3NzU=",number:11757,title:"when use key in Object.prototype carelessly as prop, it will work wrong way",user:{login:"LongTengDao",id:26104024,node_id:"MDQ6VXNlcjI2MTA0MDI0",avatar_url:"https://avatars3.githubusercontent.com/u/26104024?v=4",gravatar_id:"",url:"https://api.github.com/users/LongTengDao",html_url:"https://github.com/LongTengDao",followers_url:"https://api.github.com/users/LongTengDao/followers",following_url:"https://api.github.com/users/LongTengDao/following{/other_user}",gists_url:"https://api.github.com/users/LongTengDao/gists{/gist_id}",starred_url:"https://api.github.com/users/LongTengDao/starred{/owner}{/repo}",subscriptions_url:"https://api.github.com/users/LongTengDao/subscriptions",organizations_url:"https://api.github.com/users/LongTengDao/orgs",repos_url:"https://api.github.com/users/LongTengDao/repos",events_url:"https://api.github.com/users/LongTengDao/events{/privacy}",received_events_url:"https://api.github.com/users/LongTengDao/received_events",type:s,site_admin:!1},labels:[{id:300024015,node_id:"MDU6TGFiZWwzMDAwMjQwMTU=",url:"https://api.github.com/repos/vuejs/vue/labels/discussion",name:"discussion",color:"d4c5f9",default:!1,description:e},{id:217551163,node_id:"MDU6TGFiZWwyMTc1NTExNjM=",url:"https://api.github.com/repos/vuejs/vue/labels/feature%20request",name:"feature request",color:"fbca04",default:!1,description:e}],state:"open",locked:!1,assignee:e,assignees:[],milestone:e,comments:1,created_at:"2020-11-09T10:32:22Z",updated_at:"2020-11-10T08:22:05Z",closed_at:e,author_association:"NONE",active_lock_reason:e,body:"### Version\r\n2.6.12\r\n\r\n### Steps to reproduce\r\n```html\r\n<div></div>\r\n<script>\r\nnew Vue({\r\n  el: 'main',\r\n  template: '<MyDatetime :value=\"datetime\" />',\r\n  data: {\r\n    datetime: Date.now(),\r\n  },\r\n  components: {\r\n    MyDatetime: {\r\n      template: `\r\n        <div>\r\n          expect undefined: {{ toString + \"\" }}<br />\r\n          expect default: {{ toLocalString + \"\" }}<br />\r\n        </div>`,\r\n      props: {\r\n        value: {\r\n          type: Number,\r\n        },\r\n        toString: {\r\n          validator: mode => [ 'date-time', 'date', 'time' ].includes(mode),\r\n        },\r\n        toLocalString: {\r\n          validator: mode => [ 'date-time', 'date', 'time', 'default' ].includes(mode),\r\n          default: 'default',\r\n        },\r\n      },\r\n    },\r\n  },\r\n});\r\n<\/script>\r\n```\r\n\r\n### What is expected?\r\n\r\nThey are all keys match the uni simple rule: not start with `_` or `$`\r\n\r\n### What is actually happening?\r\n\r\nIf parent component doesn't pass the prop, then the component will get neither `undefined` nor `default`, but the value in `Object.prototype`.\r\n\r\n---\r\n\r\n1. `{}` in these two lines need to be replaced to `Object.create(null)`, the first line is required for two cases, and the second line is required for `default` case,\r\n\r\nhttps://github.com/vuejs/vue/blob/52719ccab8fccffbdf497b96d3731dc86f04c1ce/src/core/vdom/helpers/extract-props.js#L24\r\n\r\nhttps://github.com/vuejs/vue/blob/33e669b22f69a1f9c9147528360fe0bba85534f0/src/core/instance/state.js#L66\r\n\r\n2. there still leave `constructor` which can't be used, it need `delete Vue.prototype.constructor`, and give an alternative way to do what `vm.constructor` (`Sub.prototype.constructor = Sub`) do in current source code.\r\n\r\n\x3c!-- generated by vue-issues. DO NOT REMOVE --\x3e",closed_by:e,performed_via_github_app:e},{url:"https://api.github.com/repos/vuejs/vue/issues/comments/723970493",html_url:"https://github.com/vuejs/vue/issues/11757#issuecomment-723970493",issue_url:t,id:723970493,node_id:"MDEyOklzc3VlQ29tbWVudDcyMzk3MDQ5Mw==",user:{login:"posva",id:664177,node_id:"MDQ6VXNlcjY2NDE3Nw==",avatar_url:"https://avatars0.githubusercontent.com/u/664177?v=4",gravatar_id:"",url:"https://api.github.com/users/posva",html_url:"https://github.com/posva",followers_url:"https://api.github.com/users/posva/followers",following_url:"https://api.github.com/users/posva/following{/other_user}",gists_url:"https://api.github.com/users/posva/gists{/gist_id}",starred_url:"https://api.github.com/users/posva/starred{/owner}{/repo}",subscriptions_url:"https://api.github.com/users/posva/subscriptions",organizations_url:"https://api.github.com/users/posva/orgs",repos_url:"https://api.github.com/users/posva/repos",events_url:"https://api.github.com/users/posva/events{/privacy}",received_events_url:"https://api.github.com/users/posva/received_events",type:s,site_admin:!1},created_at:r,updated_at:r,author_association:"MEMBER",body:"As said in vue-next repo, creating props named like existing functions seems like a bad idea because it could break any code relying on native object functions. It's also unrealistic from a naming perspective.\r\nBecause of that, I don't think it's reasonable to use `Object.create(null)` as proposed",performed_via_github_app:e}]}],error:e,state:{issues:{issues:[]}},serverRendered:!0,routePath:"/issues/11757",config:{content:{dbHash:"be20a929"}}}}(null,"https://api.github.com/repos/vuejs/vue/issues/11757","User","2020-11-09T12:01:58Z")</script><script src="/_nuxt/665dc92.js" defer></script><script src="/_nuxt/1915f1f.js" defer></script><script src="/_nuxt/9890116.js" defer></script><script src="/_nuxt/68c6bac.js" defer></script><script src="/_nuxt/e33e779.js" defer></script>
  </body>
</html>
